<UserControl
    x:Class="Floozys_Hotel.Views.BookingOverviewView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Floozys_Hotel.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="clr-namespace:Floozys_Hotel.Converters"
    d:DesignHeight="600"
    d:DesignWidth="1000"
    mc:Ignorable="d">

    <UserControl.Resources>
        <!-- Definerer convertere til senere brug i XAML. -->
        <converters:BookingLeftMarginConverter x:Key="BookingLeftMarginConverter" />
        <converters:BookingWidthConverter x:Key="BookingWidthConverter" />
        <converters:RoomBookingsConverter x:Key="RoomBookingsConverter" />
        <converters:DateHeaderConverter x:Key="DateHeaderConverter" />
    </UserControl.Resources>

    <!-- Anvender et Grid til at opdele skærmen i 3 kolonner: Header/Venstre, Kalender/Midte, Detaljer/Højre. -->
    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="300" />
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Header  -->
        <TextBlock
            Grid.Row="0"
            Grid.Column="0"
            Margin="0,0,0,30"
            VerticalAlignment="Center"
            FontSize="30"
            FontWeight="ExtraBold"
            Text="Booking Overview" />

        <!-- Knap til oprettelse af ny booking. Binder til NewBookingCommand i ViewModelen. -->
        <Button
            Command="{Binding NewBookingCommand}"
            Grid.Row="0"
            Grid.Column="2"
            Width="180"
            Height="50"
            Margin="0,0,0,30"
            HorizontalAlignment="Right"
            Background="#90EE90"
            BorderBrush="#32CD32"
            BorderThickness="2"
            Content="New booking"
            FontSize="16"
            FontWeight="SemiBold"
            Foreground="Black" />

        <!--  Calendar  -->
        <!-- Hovedområde for kalenderen. -->
        <Border
            Grid.Row="1"
            Grid.Column="0"
            Grid.ColumnSpan="2"
            Margin="0,0,20,0"
            BorderBrush="LightGray"
            BorderThickness="1">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  Controls  -->
                <!-- Knapper til navigation (frem/tilbage) og skift af visning (Uge/Måned/År). -->
                <Grid Grid.Row="0" Margin="15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Søgefelt der binder til SearchText. UpdateSourceTrigger=PropertyChanged sikrer søgning under indtastning. -->
                    <TextBox
                        Grid.Column="0"
                        Width="200"
                        Height="35"
                        FontSize="14"
                        Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                        VerticalContentAlignment="Center"
                        Padding="10,0">
                        <TextBox.Style>
                            <Style TargetType="TextBox">
                                <Setter Property="Foreground" Value="Black"/>
                                <Style.Triggers>
                                    <Trigger Property="Text" Value="">
                                        <Setter Property="Background">
                                            <Setter.Value>
                                                <VisualBrush AlignmentX="Left" AlignmentY="Center" Stretch="None">
                                                    <VisualBrush.Visual>
                                                        <TextBlock Text="🔍 Search by Guest..." Foreground="Gray" Margin="10,0,0,0"/>
                                                    </VisualBrush.Visual>
                                                </VisualBrush>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </TextBox.Style>
                    </TextBox>

                    <StackPanel Grid.Column="1" HorizontalAlignment="Center" Orientation="Horizontal">
                        <!-- Knapper til tidsskift -->
                        <Button Command="{Binding PreviousMonthCommand}" Width="30" Height="30" Margin="0,0,10,0" Content="&lt;" FontSize="16" />
                        <TextBlock VerticalAlignment="Center" FontSize="18" FontWeight="SemiBold" Text="{Binding CurrentMonthDisplay}" />
                        <Button Command="{Binding NextMonthCommand}" Width="30" Height="30" Margin="10,0,0,0" Content="&gt;" FontSize="16" />
                    </StackPanel>

                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <!-- Knapper til visningsskift mellem Uge, Måned og År. -->
                        <Button Command="{Binding SetWeekViewCommand}" Width="60" Height="30" Margin="0,0,2,0" Content="Week">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding ViewDuration}" Value="Week">
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="Background" Value="#E0E0E0"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SetMonthViewCommand}" Width="60" Height="30" Margin="0,0,2,0" Content="Month">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding ViewDuration}" Value="Month">
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="Background" Value="#E0E0E0"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button Command="{Binding SetYearViewCommand}" Width="60" Height="30" Content="Year">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding ViewDuration}" Value="Year">
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="Background" Value="#E0E0E0"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                </Grid>

                <!--  Content  -->
                <Grid Grid.Row="1">
                    <!-- Calendar View -->
                    <!-- Anvender ScrollViewer for at muliggøre scrolling ved mange værelser. -->
                    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                        <ScrollViewer.Style>
                            <Style TargetType="ScrollViewer">
                                <Setter Property="Visibility" Value="Visible"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding ViewDuration}" Value="Year">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ScrollViewer.Style>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Room Header -->
                            <!-- Overskrift til venstre kolonne. -->
                            <Border Grid.Row="0" Grid.Column="0" BorderBrush="Gray" BorderThickness="0,0,1,1" Background="#F0F0F0" Height="30">
                                <TextBlock Text="Rooms" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold"/>
                            </Border>

                            <!-- Days Header - Responsive -->
                            <!-- Viser datoer eller ugedage i toppen. ItemsControl genererer en liste baseret på DaysInMonth. -->
                            <ItemsControl Grid.Row="0" Grid.Column="1" ItemsSource="{Binding DaysInMonth}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <UniformGrid Rows="1" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderBrush="LightGray" BorderThickness="0,0,1,1" Background="White" Height="30">
                                            <TextBlock Text="{Binding}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- Rooms -->
                            <!-- Lister alle værelser vertikalt. Der genereres en række pr. værelse. -->
                            <ItemsControl Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" ItemsSource="{Binding Rooms}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="150"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="50"/>
                                            </Grid.RowDefinitions>

                                            <Border Grid.Column="0" BorderBrush="LightGray" BorderThickness="0,0,1,1" Background="White">
                                                <StackPanel VerticalAlignment="Center" Margin="10,0">
                                                    <TextBlock Text="{Binding RoomNumber}" FontWeight="Bold"/>
                                                    <TextBlock Text="{Binding RoomSize}" FontSize="10" Foreground="Gray"/>
                                                </StackPanel>
                                            </Border>

                                            <Border Grid.Column="1" BorderBrush="LightGray" BorderThickness="0,0,0,1" x:Name="TimelineBorder">
                                                <Grid>
                                                    <!-- Background Grid Lines -->
                                                    <!-- Tegner lodrette streger til adskillelse af dage. -->
                                                    <ItemsControl ItemsSource="{Binding DataContext.DaysInMonth, RelativeSource={RelativeSource AncestorType=UserControl}}">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <UniformGrid Rows="1" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>
                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border BorderBrush="#F5F5F5" BorderThickness="0,0,1,0" Height="50"/>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>

                                                    <!-- Bookings Layer -->
                                                    <ItemsControl>
                                                        <ItemsControl.ItemsSource>
                                                            <MultiBinding Converter="{StaticResource RoomBookingsConverter}">
                                                                <Binding Path="RoomId" />
                                                                <Binding Path="DataContext.Bookings" RelativeSource="{RelativeSource AncestorType=UserControl}" />
                                                            </MultiBinding>
                                                        </ItemsControl.ItemsSource>
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <Grid />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>
                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border Background="#E6E6FA" BorderBrush="#9370DB" BorderThickness="1" CornerRadius="3" Height="40" VerticalAlignment="Top" HorizontalAlignment="Left" ToolTip="{Binding GuestID}">
                                                                    <Border.Margin>
                                                                        <MultiBinding Converter="{StaticResource BookingLeftMarginConverter}">
                                                                            <Binding Path="StartDate" />
                                                                            <Binding Path="DataContext.ViewStartDate" RelativeSource="{RelativeSource AncestorType=UserControl}" />
                                                                            <Binding Path="ActualWidth" ElementName="TimelineBorder" />
                                                                            <Binding Path="DataContext.DayCount" RelativeSource="{RelativeSource AncestorType=UserControl}" />
                                                                        </MultiBinding>
                                                                    </Border.Margin>
                                                                    <Border.Width>
                                                                        <MultiBinding Converter="{StaticResource BookingWidthConverter}">
                                                                            <Binding Path="." />
                                                                            <Binding Path="DataContext.ViewStartDate" RelativeSource="{RelativeSource AncestorType=UserControl}" />
                                                                            <Binding Path="ActualWidth" ElementName="TimelineBorder" />
                                                                            <Binding Path="DataContext.DayCount" RelativeSource="{RelativeSource AncestorType=UserControl}" />
                                                                        </MultiBinding>
                                                                    </Border.Width>
                                                                    <Border.InputBindings>
                                                                        <MouseBinding Gesture="LeftClick" Command="{Binding DataContext.SelectBookingCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" />
                                                                    </Border.InputBindings>
                                                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                                                        <TextBlock FontSize="10" FontWeight="Bold" HorizontalAlignment="Center" TextTrimming="CharacterEllipsis">
                                                                            <Run Text="{Binding Guest.FirstName}"/>
                                                                            <Run Text=" "/>
                                                                            <Run Text="{Binding Guest.LastName}"/>
                                                                        </TextBlock>
                                                                        <TextBlock Text="{Binding Guest.Country}" FontSize="9" HorizontalAlignment="Center" Foreground="#4B0082"/>
                                                                    </StackPanel>
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </Grid>
                                            </Border>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Grid>
                    </ScrollViewer>
                    
                    <!-- Year View -->
                    <ListView ItemsSource="{Binding FilteredBookings}" Margin="10" SelectedItem="{Binding SelectedBooking}">
                        <ListView.Style>
                            <Style TargetType="ListView">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding ViewDuration}" Value="Year">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ListView.Style>
                        <ListView.View>
                            <GridView>
                                <!-- Guest Name -->
                                <GridViewColumn Width="150">
                                    <GridViewColumn.Header>
                                        <GridViewColumnHeader Content="Guest Name" Command="{Binding SortBookingsCommand}" CommandParameter="Name"/>
                                    </GridViewColumn.Header>
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock>
                                                <Run Text="{Binding Guest.FirstName}"/>
                                                <Run Text=" "/>
                                                <Run Text="{Binding Guest.LastName}"/>
                                            </TextBlock>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                
                                <!-- Country -->
                                <GridViewColumn Width="100">
                                    <GridViewColumn.Header>
                                        <GridViewColumnHeader Content="Country" Command="{Binding SortBookingsCommand}" CommandParameter="Country"/>
                                    </GridViewColumn.Header>
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Guest.Country}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                
                                <!-- Email -->
                                <GridViewColumn Width="180">
                                    <GridViewColumn.Header>
                                        <GridViewColumnHeader Content="Email" Command="{Binding SortBookingsCommand}" CommandParameter="Email"/>
                                    </GridViewColumn.Header>
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Guest.Email}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                
                                <!-- Phone -->
                                <GridViewColumn Width="120">
                                    <GridViewColumn.Header>
                                        <GridViewColumnHeader Content="Phone" Command="{Binding SortBookingsCommand}" CommandParameter="Phone"/>
                                    </GridViewColumn.Header>
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Guest.PhoneNumber}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                
                                <!-- Room -->
                                <GridViewColumn Width="80">
                                    <GridViewColumn.Header>
                                        <GridViewColumnHeader Content="Room" Command="{Binding SortBookingsCommand}" CommandParameter="Room"/>
                                    </GridViewColumn.Header>
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding RoomID, StringFormat='Room {0}'}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                
                                <!-- Start Date -->
                                <GridViewColumn Width="100">
                                    <GridViewColumn.Header>
                                        <GridViewColumnHeader Content="Start Date" Command="{Binding SortBookingsCommand}" CommandParameter="StartDate"/>
                                    </GridViewColumn.Header>
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding StartDate, StringFormat='{}{0:dd/MM/yyyy}'}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                
                                <!-- End Date -->
                                <GridViewColumn Width="100">
                                    <GridViewColumn.Header>
                                        <GridViewColumnHeader Content="End Date" Command="{Binding SortBookingsCommand}" CommandParameter="EndDate"/>
                                    </GridViewColumn.Header>
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding EndDate, StringFormat='{}{0:dd/MM/yyyy}'}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                            </GridView>
                        </ListView.View>
                    </ListView>
                </Grid>
            </Grid>
        </Border>

        <!--  Right Panel  -->
        <StackPanel Grid.Row="1" Grid.Column="2">
            <Border Margin="0,0,0,20" Padding="15" BorderBrush="LightGray" BorderThickness="1">
                <StackPanel>
                    <TextBlock Text="Total Revenue for This Month:" FontWeight="Bold" Margin="0,0,0,10"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Total:" FontWeight="Bold" Grid.Column="0"/>
                        <TextBlock Text="{Binding RevenueThisMonth, StringFormat='{}{0:C}'}" FontWeight="Bold" Grid.Column="1"/>
                    </Grid>
                </StackPanel>
            </Border>

            <Border Padding="15" BorderBrush="LightGray" BorderThickness="1" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Payment Status:" FontWeight="Bold" Margin="0,0,0,10"/>
                    <TextBlock Text="Coming soon..." FontStyle="Italic" Foreground="Gray"/>
                </StackPanel>
            </Border>

            <Border Padding="15" BorderBrush="LightGray" BorderThickness="1" Background="#FAFAFA">
                <StackPanel>
                    <TextBlock Text="Booking Details:" FontWeight="Bold" Margin="0,0,0,10"/>
                    <Grid>
                        <Grid.Style>
                            <Style TargetType="Grid">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedBooking}" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Style>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Guest Info -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Name:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Margin="0,0,0,5">
                            <TextBlock Text="{Binding SelectedBooking.Guest.FirstName}" Margin="0,0,5,0"/>
                            <TextBlock Text="{Binding SelectedBooking.Guest.LastName}"/>
                        </StackPanel>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Country:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding SelectedBooking.Guest.Country}" Margin="0,0,0,5"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Email:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding SelectedBooking.Guest.Email}" Margin="0,0,0,5" TextTrimming="CharacterEllipsis" ToolTip="{Binding SelectedBooking.Guest.Email}"/>

                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Phone:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding SelectedBooking.Guest.PhoneNumber}" Margin="0,0,0,5"/>

                        <Separator Grid.Row="4" Grid.ColumnSpan="2" Margin="0,10"/>

                        <!-- Booking Info -->
                        <TextBlock Grid.Row="5" Grid.Column="0" Text="Room:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="5" Grid.Column="1" Text="{Binding SelectedBooking.RoomID, StringFormat='Room {0}'}" Margin="0,0,0,5"/>

                        <TextBlock Grid.Row="6" Grid.Column="0" Text="Check-in:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="6" Grid.Column="1" Text="{Binding SelectedBooking.StartDate, StringFormat='{}{0:dd/MM/yyyy}'}" Margin="0,0,0,5"/>

                        <TextBlock Grid.Row="7" Grid.Column="0" Text="Check-out:" FontWeight="SemiBold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="7" Grid.Column="1" Text="{Binding SelectedBooking.EndDate, StringFormat='{}{0:dd/MM/yyyy}'}" Margin="0,0,0,5"/>
                    </Grid>
                    <TextBlock Text="Select a booking to view details." FontStyle="Italic" Foreground="Gray">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SelectedBooking}" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>